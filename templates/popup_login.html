<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BharatID Login</title>
<style>
/* --- Reset & Body --- */
* { box-sizing: border-box; margin:0; padding:0; }
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#f5f5f5;
    transition: background 0.3s ease;
}

/* --- Card --- */
.popup-container {
    display:flex;
    justify-content:center;
    align-items:center;
    width:100%;
    height:100%;
    padding:10px;
}
.popup-card {
    background:white;
    padding:30px 25px;
    border-radius:16px;
    width:380px;
    max-width:100%;
    box-shadow: 0 15px 35px rgba(0,0,0,0.25);
    text-align:center;
    transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease, color 0.3s ease;
}
.popup-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 45px rgba(0,0,0,0.3);
}

/* --- Heading --- */
h2 {
    margin-bottom:8px;
    font-size:22px;
    color:#d35400; /* BharatID color */
}

/* --- Subtitle --- */
p.subtitle {
    font-size:14px;
    color:#5f6368;
    margin-bottom:20px;
}

/* --- Accounts List --- */
.accounts-list {
    margin:20px 0;
}
.account-item {
    display:flex;
    align-items:center;
    gap:14px;
    padding:12px 15px;
    border-radius:12px;
    cursor:pointer;
    transition:0.2s;
    background:#f1f3f4;
    margin-bottom:10px;
}
.account-item:hover {
    background:#ffe0b2;
    transform: scale(1.02);
}
.avatar {
    width:45px;
    height:45px;
    border-radius:50%;
    object-fit:cover;
    border:2px solid #ddd;
    transition:0.2s;
}
.avatar:hover { transform: scale(1.1); }

/* --- Account Text --- */
.acc-text { text-align:left; }
.acc-name { font-weight:bold; display:block; font-size:16px; color:#d35400; }
.acc-email { font-size:13px; color:#555; }

/* --- Other Account Button --- */
.other-account {
    width:100%;
    padding:12px 0;
    border:none;
    border-radius:10px;
    background:#f39c12;
    color:white;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
    font-size:15px;
    margin-top:10px;
}
.other-account:hover {
    background:#e67e22;
    box-shadow: 0 5px 15px rgba(243,156,18,0.3);
}

/* --- Footer --- */
.footer {
    font-size:12px;
    color:#5f6368;
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:8px;
    margin-top:15px;
}
.footer a {
    color:#5f6368;
    text-decoration:none;
}
.footer a:hover { text-decoration:underline; }

/* --- Responsive --- */
@media (max-width:450px){
    .popup-card { width:100%; padding:20px 15px; }
    .account-item { padding:10px 12px; gap:10px; }
    .avatar { width:40px; height:40px; }
    .acc-name { font-size:14px; }
    .acc-email { font-size:12px; }
    .other-account { font-size:14px; padding:10px 0; }
}

/* --- Dark Mode --- */
@media (prefers-color-scheme: dark) {
    body { background:#1c1c1c; }
    .popup-card { background:#2c2c2c; color:#e0e0e0; }
    h2 { color:#f39c12; }
    p.subtitle { color:#aaa; }
    .account-item { background:#3a3a3a; }
    .account-item:hover { background:#4a4a4a; }
    .acc-name { color:#f39c12; }
    .acc-email { color:#ccc; }
    .avatar { border:2px solid #555; }
    .other-account { background:#f39c12; color:#fff; }
    .other-account:hover { background:#e67e22; }
    .footer { color:#aaa; }
    .footer a { color:#aaa; }
}
</style>
</head>
<body>
<div class="popup-container">
    <div class="popup-card">
        <h2>Sign in with BharatID</h2>
        <p class="subtitle">Choose an account to continue</p>

        <div class="accounts-list">
            {% for acc in accounts %}
            <div class="account-item" onclick="chooseAccount('{{ acc.email }}', '{{ acc.name }}', '{{ acc.avatar }}')">
                <img src="{{ acc.avatar }}" class="avatar" alt="Avatar">
                <div class="acc-text">
                    <span class="acc-name">{{ acc.name }}</span>
                    <span class="acc-email">{{ acc.email }}</span>
                </div>
            </div>
            {% endfor %}
        </div>

        <button class="other-account" onclick="useAnotherAccount()">Use another account</button>

        <div class="footer">
            <a href="#">Help</a>·
            <a href="#">Privacy</a>·
            <a href="#">Terms</a>
        </div>
    </div>
</div>

<script>
function chooseAccount(email, name, avatar){
    window.opener.postMessage(
        {type:"login-success", email: email, name: name, avatar: avatar},
        window.location.origin
    );
    window.close();
}
function useAnotherAccount(){
    window.location.href = "/login";
}
</script>
</body>
</html>
